# 系统设置 - 用户管理功能

## 功能概述

系统设置功能现已启用，包含完整的用户管理功能，允许管理员用户管理系统中的所有用户账户。

## 功能特性

### 1. 用户列表管理
- 查看所有用户信息
- 用户搜索和筛选
- 分页显示用户列表
- 实时统计信息（总用户数、活跃用户、禁用用户等）

### 2. 用户操作
- **添加用户**：创建新的用户账户
- **编辑用户**：修改用户信息、角色和状态
- **删除用户**：删除不需要的用户账户
- **用户状态管理**：启用/禁用用户账户

### 3. 角色管理
- **普通用户**：基本的任务管理权限
- **管理员**：完整的系统管理权限，包括用户管理

### 4. 权限控制
- 只有管理员可以访问用户管理功能
- 管理员不能删除自己的账户
- 管理员不能修改自己的角色

## 使用方法

### 1. 访问用户管理
1. 登录系统
2. 确保当前用户具有管理员角色
3. 点击左侧菜单中的"系统设置"
4. 进入用户管理界面

### 2. 添加新用户
1. 点击"添加用户"按钮
2. 填写用户信息：
   - 用户名（必填，3-20个字符）
   - 邮箱（必填，有效邮箱格式）
   - 显示名称（必填，最多50个字符）
   - 密码（必填，至少6个字符）
   - 用户角色（普通用户/管理员）
   - 用户状态（活跃/禁用）
3. 点击"确定"保存

### 3. 编辑用户信息
1. 在用户列表中找到要编辑的用户
2. 点击"编辑"按钮
3. 修改需要更新的字段
4. 点击"确定"保存更改

### 4. 删除用户
1. 在用户列表中找到要删除的用户
2. 点击"删除"按钮
3. 确认删除操作

## 技术实现

### 后端API
- `GET /api/admin/users` - 获取用户列表
- `POST /api/admin/users` - 创建新用户
- `PUT /api/admin/users/{user_id}` - 更新用户信息
- `DELETE /api/admin/users/{user_id}` - 删除用户
- `GET /api/admin/users/{user_id}` - 获取特定用户信息

### 数据库变更
- 添加了 `role` 字段到 `users` 表
- 支持 `user` 和 `admin` 两种角色
- 创建了相应的索引以提高查询性能

### 前端组件
- `UserManagement.tsx` - 用户管理主组件
- 集成到 `App.tsx` 的系统设置页面
- 使用 Ant Design 组件库构建界面

## 安全考虑

1. **权限验证**：所有管理员API都需要验证用户权限
2. **数据验证**：前后端都有完整的数据验证
3. **操作限制**：防止管理员误操作自己的账户
4. **错误处理**：完善的错误处理和用户提示

## 数据库迁移

如果需要为现有数据库添加角色支持，请执行以下迁移脚本：

```sql
-- 执行 backend/migrations/add_user_role.sql
```

## 注意事项

1. 首次使用前，请确保至少有一个管理员账户
2. 建议定期备份用户数据
3. 删除用户操作不可逆，请谨慎操作
4. 用户密码使用SHA256哈希存储（生产环境建议使用bcrypt）

## 未来扩展

- 用户组管理
- 更细粒度的权限控制
- 用户活动日志
- 批量用户操作
- 用户导入/导出功能
